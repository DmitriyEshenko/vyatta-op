#
# Operational mode template for the "traceroute" command
#

help:   Track network path to specified <hostname|IPv4 address>
allowed:
	vyatta-allowed-hosts

run:
     if /opt/vyatta/sbin/vyatta-validate-type.pl -q ipv4 $2
       then
           /usr/bin/traceroute $2
           echo
       else
           if cat /etc/resolv.conf 2> /dev/null | grep -q nameserver
             then
                 if /usr/bin/host $2 &> /dev/null
                   then
                       /usr/bin/traceroute $2
                   else
                       echo "Invalid IP address or host name '$2'"
                 fi
             else
                 echo "Either enter a valid IPv4 address or configure Domain Name Server to resolve host names"
           fi
     fi
